# Render Deployment Checklist

## Pre-Deployment Checklist

### âœ… Repository Preparation
- [ ] All code is committed to Git
- [ ] Repository is pushed to GitHub/GitLab/Bitbucket
- [ ] `.env.example` file is created (do NOT commit `.env`)
- [ ] `.gitignore` includes sensitive files
- [ ] `requirements.txt` includes all dependencies
- [ ] `build.sh` is executable and tested locally

### âœ… Configuration Files
- [ ] `render.yaml` is configured correctly
- [ ] `build.sh` is in the repository
- [ ] `runtime.txt` specifies Python version (3.11.0)
- [ ] `requirements.txt` includes production dependencies:
  - [ ] `whitenoise` (for static files)
  - [ ] `psycopg2-binary` (for PostgreSQL)
  - [ ] `dj-database-url` (for database configuration)
  - [ ] `gunicorn` (for WSGI server)

### âœ… Settings Configuration
- [ ] `settings.py` handles production environment
- [ ] Environment variables are used (no hardcoded secrets)
- [ ] `DEBUG` is set to `False` in production
- [ ] `ALLOWED_HOSTS` is configured
- [ ] Static files configuration is correct
- [ ] Database configuration supports PostgreSQL

### âœ… Secrets Preparation
- [ ] Gmail App Password is generated
- [ ] Gemini API Key is obtained
- [ ] Secret Key is generated (or Render will generate)
- [ ] All secrets are documented (not committed)

---

## Render Setup Checklist

### âœ… Render Account
- [ ] Render account is created
- [ ] Email is verified
- [ ] Payment method is added (for paid plans, optional for free tier)

### âœ… Database Setup
- [ ] PostgreSQL database is created
- [ ] Database name is noted
- [ ] Internal Database URL is saved
- [ ] Database region matches web service region

### âœ… Web Service Setup
- [ ] Repository is connected
- [ ] Branch is selected (usually `main`)
- [ ] Root directory is set to `agent_backend`
- [ ] Build command is set: `chmod +x build.sh && ./build.sh`
- [ ] Start command is set: `gunicorn agent_backend.wsgi:application --bind 0.0.0.0:$PORT`
- [ ] Python version is set to 3.11.0

### âœ… Environment Variables
- [ ] `SECRET_KEY` is set (or auto-generated by Render)
- [ ] `DEBUG` is set to `False`
- [ ] `RENDER` is set to `true`
- [ ] `ALLOWED_HOSTS` is set (or auto-configured)
- [ ] `DATABASE_URL` is set (from database)
- [ ] `EMAIL_HOST` is set
- [ ] `EMAIL_PORT` is set to `587`
- [ ] `EMAIL_USE_TLS` is set to `True`
- [ ] `EMAIL_HOST_USER` is set
- [ ] `EMAIL_HOST_PASSWORD` is set (Gmail App Password)
- [ ] `DEFAULT_FROM_EMAIL` is set
- [ ] `GEMINI_API_KEY` is set
- [ ] `CHROMA_DB_PATH` is set
- [ ] `RAG_PDFS_PATH` is set

### âœ… Persistent Disk (Optional but Recommended)
- [ ] Persistent disk is created for ChromaDB
- [ ] Mount path is configured: `/opt/render/project/src/ragImplementation`
- [ ] Disk size is set (1GB minimum)

---

## Deployment Steps

### âœ… Initial Deployment
- [ ] Web service is created
- [ ] Build process completes successfully
- [ ] No build errors in logs
- [ ] Application starts successfully
- [ ] Health check passes

### âœ… Database Setup
- [ ] Migrations are run: `python manage.py migrate`
- [ ] Superuser is created (optional): `python manage.py createsuperuser`
- [ ] Database connection is verified

### âœ… Static Files
- [ ] Static files are collected: `python manage.py collectstatic`
- [ ] Static files are accessible at `/static/`
- [ ] WhiteNoise is serving static files correctly

### âœ… ChromaDB Setup
- [ ] ChromaDB directories are created
- [ ] PDFs are uploaded to `ragImplementation/pdfs/`
- [ ] ChromaDB is initialized (if needed)
- [ ] RAG queries are working

### âœ… Verification
- [ ] Application URL is accessible
- [ ] API endpoint works: `/api/hello`
- [ ] Admin panel is accessible: `/admin`
- [ ] Static files are loading
- [ ] Database is connected
- [ ] Email sending works (test)
- [ ] RAG search works
- [ ] T2SQL works

---

## Post-Deployment Checklist

### âœ… Monitoring
- [ ] Logs are monitored
- [ ] Error tracking is set up (optional)
- [ ] Performance is monitored
- [ ] Resource usage is checked

### âœ… Security
- [ ] HTTPS is enabled (automatic on Render)
- [ ] Secrets are not in repository
- [ ] Environment variables are secure
- [ ] Database backups are enabled (paid plans)

### âœ… Documentation
- [ ] Deployment documentation is updated
- [ ] Environment variables are documented
- [ ] API endpoints are documented
- [ ] Troubleshooting guide is available

### âœ… Maintenance
- [ ] Backup strategy is in place
- [ ] Update schedule is planned
- [ ] Monitoring alerts are configured
- [ ] Support contacts are documented

---

## Troubleshooting Checklist

### Build Issues
- [ ] Check build logs for errors
- [ ] Verify `requirements.txt` is correct
- [ ] Check Python version matches
- [ ] Verify `build.sh` is executable
- [ ] Check file paths are correct

### Runtime Issues
- [ ] Check application logs
- [ ] Verify environment variables are set
- [ ] Check database connection
- [ ] Verify static files are collected
- [ ] Check ChromaDB paths

### Database Issues
- [ ] Verify `DATABASE_URL` is correct
- [ ] Check database is running
- [ ] Verify migrations are run
- [ ] Check database permissions

### Static Files Issues
- [ ] Verify `STATIC_ROOT` is set
- [ ] Check `collectstatic` ran successfully
- [ ] Verify WhiteNoise is installed
- [ ] Check static files paths

### ChromaDB Issues
- [ ] Verify paths are correct
- [ ] Check persistent disk is mounted
- [ ] Verify directories are created
- [ ] Check file permissions

---

## Quick Reference

### Render Dashboard URLs
- Web Service: `https://dashboard.render.com/web/[service-id]`
- Database: `https://dashboard.render.com/databases/[database-id]`
- Logs: Available in web service dashboard

### Useful Commands
```bash
# Run migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Collect static files
python manage.py collectstatic --no-input

# Check deployment
curl https://your-app.onrender.com/api/hello
```

### Support Resources
- Render Documentation: https://render.com/docs
- Render Community: https://community.render.com
- Django Deployment: https://docs.djangoproject.com/en/stable/howto/deployment/

---

## Notes

- Free tier has limitations (spins down after 15 minutes of inactivity)
- Consider upgrading to paid plan for production use
- Monitor resource usage regularly
- Backup database regularly (paid plans include backups)
- Keep dependencies updated
- Monitor logs for errors

---

## Success Criteria

âœ… Application is accessible at Render URL
âœ… All API endpoints are working
âœ… Database is connected and migrations are applied
âœ… Static files are loading correctly
âœ… Email sending is working
âœ… RAG search is working
âœ… T2SQL is working
âœ… Admin panel is accessible
âœ… No errors in logs
âœ… Application is stable

---

Good luck with your deployment! ðŸš€

